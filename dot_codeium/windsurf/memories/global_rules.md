---
trigger: always_on
description: Define global development rules and guidelines
instruction:
  - Follow prerequisites and tool requirements
  - Use pwsh shell and bun package manager
  - Follow task workflow phases
  - Apply best practices
  - Avoid prohibited actions
condition:
  - ใช้เสมอเมื่อมีการทำงานร่วมกันทุกครั้ง
  - ใช้เป็นกฎพื้นฐานในการพัฒนาซอฟต์แวร์
---

## 1. Task With Me (ใช้ทุกงาน)

### 1.0. การใช้งาน (ใช้เสมอเมื่อมีการทำงานร่วมกัน)
- ใช้เมื่อมีการทำงานร่วมกันทุกครั้ง
- ใช้เป็นกฎพื้นฐานในการสื่อสารและปฏิบัติงาน

### 1.1. ภาษาที่ใช้สื่อสาร (ใช้เสมอเมื่อสื่อสาร)
- สื่อสารระหว่างทำงาน -> ใช้ภาษาไทย

### 1.2. การสั่งทำงานต่อ (ใช้เมื่อต้องการทำงานต่อ)
- พิมพ์ "." -> ทำงานต่อจากสถานะล่าสุด
- พิมพ์ "." -> ทำตามที่แนะนำ (ถ้ามี)

### 1.3. การอ้างอิงค่า ENV (ใช้เมื่อมีการใช้ {})
- มีการใช้ {} -> อ้างอิงค่า ENV จาก section "ENV"


---

## 2. Task Workflow Phases (ใช้ทุกงาน)

### 2.0. การใช้งาน (ใช้เมื่อมีการทำงานร่วมกัน)
- ใช้เมื่อมีการทำงานร่วมกันทุกครั้ง
- ใช้เป็นแนวทางในการดำเนินงานตามขั้นตอนที่กำหนด

### 2.1. BEFORE_TASK (ใช้ก่อนเริ่มงาน)

#### 2.1.1. การเตรียมโปรเจกต์ (ใช้ก่อนเริ่มงาน)
- ก่อนเริ่มงาน -> ทำ /prepare-project

#### 2.1.2. การวิเคราะห์โปรเจกต์ (ใช้ทุกครั้งที่เริ่มงาน)
- ทุกครั้งที่เริ่มงาน -> ทำ /analyze-project

#### 2.1.3. การวางแผน (ใช้เมื่องานมีหลายขั้นตอน)
- งานมีหลายขั้นตอน หรือแตะหลายไฟล์ -> ทำ PLANNING ให้เป็น task ย่อยๆจำนวนมาก และทำให้ครบ

#### 2.1.4. การ breakdown ก่อน planning (ใช้ก่อนเริ่ม planning)
- ก่อนเริ่ม planning -> BREAKDOWN เป็น numbered list เป็นข้อๆ ที่ชัดเจน

### 2.2. ON_TASK (ใช้ระหว่างทำงาน)

#### 2.2.1. การดูโครงสร้าง (ใช้เมื่อเริ่มสำรวจหรือยังไม่มั่นใจจุดแก้ไข)
- เริ่มสำรวจหรือยังไม่มั่นใจจุดแก้ไข -> ดูโครงสร้างโปรเจกต์ด้วย /check-file-structures

#### 2.2.2. การแตกงานสร้างไฟล์ (ใช้เมื่อต้องสร้างของใหม่)
- ต้องสร้างของใหม่ -> BREAKDOWN เป็นไฟล์ย่อยๆ โดยเรียง config file, types, ui, function, io และหลีกเลี่ยงไฟล์ยาว

#### 2.2.3. การใช้เครื่องมือ (ใช้เมื่อต้องใช้ CLI ใดๆ)
- ต้องใช้ CLI ใดๆ -> ตรวจสอบก่อนด้วย /check-cli-installed

#### 2.2.4. การทำให้แก้จริง (ใช้เมื่อมีการแก้ไขโค้ดหรือไฟล์)
- มีการแก้ไขโค้ดหรือไฟล์ -> ทำ /make-real ทุกครั้ง

#### 2.2.5. การใช้ MCP (ใช้เมื่อต้องใช้งาน MCP)
- ต้องใช้งาน MCP -> ใช้ config ที่ c:/Users/{COMPUTER_USERNAME}/.codeium/windsurf/mcp_config.json

#### 2.2.6. การทำตามคำสั่งในไฟล์ (ใช้เมื่อพบคอมเมนต์ @ai ในไฟล์)
- พบคอมเมนต์ @ai ในไฟล์ -> ทำตามนั้น

#### 2.2.7. การค้นหาเมื่อไม่แน่ใจ (ใช้เมื่อไม่มั่นใจแนวทางหรือคำตอบ)
- ไม่มั่นใจแนวทางหรือคำตอบ -> SEARCH ด้วย google search หรือ mcp:deepwiki หรือ mcp:context7

#### 2.2.8. การขอข้อมูลเพิ่ม (ใช้เมื่อต้องการให้ผู้ใช้เปิดไฟล์/ให้ข้อมูลเพิ่ม)
- ต้องให้คุณเปิดไฟล์/ให้ข้อมูลเพิ่ม -> ขอด้วย open <file>
- ต้องให้คุณเข้าเว็บไซต์ -> ขอด้วย open <url>
- ต้องให้คุณ start server หรือเปิดเว็บแอป -> ขอด้วย open <url> หรือ open <file> แล้วรอให้คุณเปิดเว็บ

ตัวอย่าง:
````
open d:\wai\apps\aichat\app.vue
open http://localhost:3000
open https://example.com
````

#### 2.2.9. การทำงานเยอะ (ใช้เมื่องานมีจำนวนมากหรือซ้ำๆ)
- งานมีจำนวนมากหรือซ้ำๆ -> AUTOMATE ด้วย /use-scripts

#### 2.2.10. การทำ mockup (ใช้เมื่อต้องใช้รูป/ข้อมูลตัวอย่าง)
- ต้องใช้รูป/ข้อมูลตัวอย่าง -> ใช้ URL จริงจาก unsplash หรือแหล่งอื่น

#### 2.2.11. การจัดการปัญหาระหว่างทาง (ใช้เมื่อพบ ERROR หรือ WARNING)
- พบ ERROR หรือ WARNING -> จดไว้ และก่อนจบงานให้กลับมา FIX ให้ครบ

#### 2.2.12. การไม่ปิดปัญหา (ใช้เมื่อต้องแก้ lint/test/type)
- ต้องแก้ lint/test/type -> ห้ามใช้ pattern กลุ่ม *-ignore เพื่อกลบปัญหา

#### 2.2.13. การตั้งค่า (ใช้เมื่อต้องใส่ค่าคงที่ที่ควรยืดหยุ่น)
- ต้องใส่ค่าคงที่ที่ควรยืดหยุ่น -> ห้าม HARD_CODE

#### 2.2.14. ประสิทธิภาพ (ใช้เมื่อเลือก dependency/แนวทาง)
- เลือก dependency/แนวทาง -> ห้ามใช้ lib ที่ไม่มีประสิทธิภาพ

#### 2.2.15. การเปลี่ยนชื่อหรือลบไฟล์ (ใช้เมื่อเปลี่ยนชื่อไฟล์/ลบไฟล์)
- เปลี่ยนชื่อไฟล์/ลบไฟล์ -> ANALYZE references ที่เกี่ยวข้องก่อน
- IDENTIFY ไฟล์ที่อ้างอิงถึงไฟล์ที่จะเปลี่ยนชื่อ/ลบ
- UPDATE references ทั้งหมดให้ถูกต้องก่อนทำการเปลี่ยนชื่อ/ลบ

---

## 3. Before Task End (ใช้ก่อนจบงาน)

### 3.0. การใช้งาน
- ใช้ก่อนจบงานทุกครั้ง
- ใช้เพื่อตรวจสอบคุณภาพและความสมบูรณ์ของงาน

### 3.1. คุณภาพโค้ด (ใช้ก่อนสรุปงาน)
- ก่อนสรุปงาน -> ทำ /run-verify

### 3.2. การปรับปรุงโครงสร้าง
- ก่อนสรุปงาน -> ทำ /refactor

### 3.3. งานค้าง
- มี TODO.md -> ทำตาม TODO.md ให้ครบ และลบ TODO.md

### 3.4. การตรวจแผน
- มี PLAN -> VALIDATE ว่าทำครบทุกข้อ ถ้ายังไม่ครบให้ทำจนกว่าจะครบ

### 3.5. ไอเดียต่อยอด
- ปิดงานแล้ว -> ขอ /idea-features

---

## 4. ENV (ใช้เมื่อมีการใช้ {})

### 4.0. การใช้งาน
- ใช้เมื่อมีการใช้ {} ในข้อความหรือ path
- ใช้เพื่ออ้างอิงค่าคงที่ที่ต้องการ

### 4.1. การอ้างอิงค่า
- มีการใช้ {} ในข้อความหรือ path -> ใช้ค่า ENV ต่อไปนี้

```env [.env]
COMPUTER_USERNAME = "newkub"
GITHUB_USERNAME = "newkub"
```

---

## 5. Tools (ใช้ทุกงาน)

### 5.0. การใช้งาน
- ใช้เมื่อมีการทำงานร่วมกันทุกครั้ง
- ใช้เป็นแนวทางในการเลือกและใช้เครื่องมือ

### 5.1. Shell
- รันคำสั่งบนเครื่อง -> ใช้ pwsh

### 5.2. CLI ตรวจสอบ
- ก่อนใช้เครื่องมือใดๆ -> ใช้ /check-cli-installed

### 5.3. File operation
- ทำงานเกี่ยวกับไฟล์/โฟลเดอร์ -> ใช้ pwsh

---

## 6. Workflows (ใช้เมื่อเขียน workflow ใหม่)

### 6.0. การใช้งาน
- ใช้เมื่อต้องการเขียนหรือแก้ไข workflow
- ใช้เป็นแนวทางในการจัดการ workflows

### 6.1. การเขียน workflow ใหม่
- ต้องสร้างหรือแก้ไข workflow -> ทำตาม /write-rules เสมอ

### 6.2. การแก้ไข /write-rules
- แก้ไข /write-rules -> ตรวจสอบ /write-rules ด้วย /write-rules เสมอ
- VALIDATE ว่าการแก้ไข /write-rules เป็นไปตามกฏใน /write-rules เอง

### 6.3. การแก้ไข global_rules.md
- แก้ไข global_rules.md -> VALIDATE ด้วย /write-rules เสมอ
- CHECK ว่าการแก้ไข global_rules.md เป็นไปตามหลักการใน /write-rules

### 6.4. การส่ง workflows หลายตัวพร้อมกัน
- ส่ง `@[/workflow1] @[/workflow2]` -> /workflow1 follow ตาม /workflow2
- workflow ด้านหน้าเป็น workflow ที่ต้อง follow ตาม workflow ด้านหลัง

### 6.5. การตรวจสอบ workflows reference
- ทุกครั้งที่แก้ไข workflows ใน `[/windsurf-global-workflows]` -> ตรวจสอบ workflows reference ว่าต้องมีอยู่จริง
- CHECK ว่า workflow ที่ถูกอ้างอิงมีอยู่ในระบบ
- ถ้าพบ reference ที่ไม่มีอยู่จริง -> แจ้งเตือนและแก้ไขให้ถูกต้อง
